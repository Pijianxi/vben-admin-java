var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(t,o,l)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l,n=("undefined"!=typeof require&&require,(e,t,o)=>new Promise(((l,a)=>{var n=e=>{try{i(o.next(e))}catch(t){a(t)}},r=e=>{try{i(o.throw(e))}catch(t){a(t)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,r);i((o=o.apply(e,t)).next())})));import{g as r,h as i}from"./useForm.1f83b549.js";import{z as s,bH as u,D as d,r as p,j as c,u as m,a0 as f,F as b,a1 as v,a5 as h,w,a4 as y}from"./vendor.54f9b785.js";/* empty css              */import{_ as P}from"./index.fcdcd43d.js";import{B as g,a as S}from"./index.12c02a89.js";import{j as I,k as x,l as T}from"./system.0b2cd881.js";const j=[{title:"菜单名称",dataIndex:"menuName",width:200,align:"left"},{title:"图标",dataIndex:"icon",width:50,customRender:({record:e})=>s(P,{icon:e.icon})},{title:"权限标识",dataIndex:"permission",width:180},{title:"组件",dataIndex:"component"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=1==~~e.status,o=t?"启用":"停用";return s(u,{color:t?"green":"red"},(()=>o))}},{title:"菜单状态",dataIndex:"show",width:80,customRender:({record:e})=>{const t=1==~~e.show,o=t?"展示":"不展示";return s(u,{color:t?"green":"red"},(()=>o))}},{title:"创建时间",dataIndex:"createTime",width:180}],R=e=>1===e,B=e=>2===e,D=e=>0===e,E=[{field:"menuName",label:"菜单名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:1},{label:"停用",value:0}]},colProps:{span:8}}],O=[{field:"type",label:"菜单类型",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"目录",value:0},{label:"菜单",value:1},{label:"按钮",value:2}]},colProps:{lg:24,md:24}},{field:"menuName",label:"菜单名称",component:"Input",required:!0},{field:"parentMenu",label:"上级菜单",component:"TreeSelect",componentProps:{replaceFields:{title:"menuName",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"icon",label:"图标",component:"IconPicker",required:!0,ifShow:({values:e})=>!B(e.type)&&!D(e.show)},{field:"routePath",label:"路由地址",component:"Input",required:!0},{field:"currentActiveMenu",label:"激活菜单",component:"Input",ifShow:({values:e})=>D(e.show)},{field:"component",label:"组件路径",component:"Input",ifShow:({values:e})=>R(e.type)},{field:"permission",label:"权限标识",component:"Input",ifShow:({values:e})=>!(0===e.type)},{field:"method",label:"请求方法",component:"RadioButtonGroup",defaultValue:"GET",componentProps:{options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"DELETE",value:"DELETE"},{label:"PUT",value:"PUT"}]},ifShow:({values:e})=>B(e.type)},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"启用",value:1},{label:"禁用",value:0}]}},{field:"isExt",label:"是否外链",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]},ifShow:({values:e})=>!B(e.type)},{field:"keepalive",label:"是否缓存",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]},ifShow:({values:e})=>R(e.type)},{field:"show",label:"是否显示",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"是",value:1},{label:"否",value:0}]},ifShow:({values:e})=>!B(e.type)}];var F=d({name:"MenuDrawer",components:{BasicDrawer:g,BasicForm:r},emits:["success","register"],setup(e,{emit:r}){const s=p(!0),u=p(0),[d,{resetFields:f,setFieldsValue:b,updateSchema:v,validate:h}]=i({labelWidth:100,schemas:O,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[w,{setDrawerProps:y,closeDrawer:P}]=S((e=>n(this,null,(function*(){yield f(),y({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),m(s)&&(u.value=e.record.id,yield b(((e,n)=>{for(var r in n||(n={}))o.call(n,r)&&a(e,r,n[r]);if(t)for(var r of t(n))l.call(n,r)&&a(e,r,n[r]);return e})({},e.record)));const n=yield I();yield v({field:"parentMenu",componentProps:{treeData:n}})}))));return{registerDrawer:w,registerForm:d,getTitle:c((()=>m(s)?"编辑菜单":"新增菜单")),handleSubmit:function(){return n(this,null,(function*(){try{const e=yield h();y({confirmLoading:!0});let t=e;if(m(s)){t.id=u.value,(yield x(t))&&(P(),r("success"))}else{(yield T(t))&&(P(),r("success"))}}finally{y({confirmLoading:!1})}}))}}}});F.render=function(e,t,o,l,a,n){const r=f("BasicForm"),i=f("BasicDrawer");return b(),v(i,y(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:h((()=>[w(r,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var G=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:F});export{G as M,F as _,j as c,E as s};
