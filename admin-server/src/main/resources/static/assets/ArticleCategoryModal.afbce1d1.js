var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,l=("undefined"!=typeof require&&require,(e,t,a)=>new Promise(((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},n=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);s((a=a.apply(e,t)).next())})));import{B as n,b as s}from"./index.ce2ad58c.js";import{g as i,h as d}from"./useForm.1f83b549.js";import{z as c,bH as u,D as p,r as m,u as f,j as g,a0 as y,F as b,a1 as v,a5 as h,w as P,a4 as x}from"./vendor.54f9b785.js";/* empty css              */import{g as j,C as w,a as C}from"./article.faf6927b.js";const I=[{title:"分类名称",dataIndex:"categoryName",width:160,align:"left"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=1==~~e.status,a=t?"启用":"停用";return c(u,{color:t?"green":"red"},(()=>a))}},{title:"创建时间",dataIndex:"createTime",width:180},{title:"备注",dataIndex:"remark"}],O=[{field:"categoryName",label:"分类名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:1},{label:"停用",value:0}]},colProps:{span:8}}],F=[{field:"categoryName",label:"分类名称",component:"Input",required:!0},{field:"parentCategory",label:"上级分类",component:"TreeSelect",componentProps:{replaceFields:{title:"categoryName",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"启用",value:1},{label:"停用",value:0}]},required:!0},{label:"备注",field:"remark",component:"InputTextArea"}];var M=p({name:"ArticleCategoryModal",components:{BasicModal:n,BasicForm:i},emits:["success","register"],setup(e,{emit:n}){const i=m(!0),c=m(0),[u,{resetFields:p,setFieldsValue:y,updateSchema:b,validate:v}]=d({labelWidth:100,schemas:F,showActionButtonGroup:!1}),[h,{setModalProps:P,closeModal:x}]=s((e=>l(this,null,(function*(){yield p(),P({confirmLoading:!1}),i.value=!!(null==e?void 0:e.isUpdate),f(i)&&(c.value=e.record.id,yield y(((e,l)=>{for(var n in l||(l={}))a.call(l,n)&&o(e,n,l[n]);if(t)for(var n of t(l))r.call(l,n)&&o(e,n,l[n]);return e})({},e.record)));const l=yield j();yield b({field:"parentCategory",componentProps:{treeData:l}})}))));return{registerModal:h,registerForm:u,getTitle:g((()=>f(i)?"编辑部门":"新增部门")),handleSubmit:function(){return l(this,null,(function*(){try{const e=yield v();P({confirmLoading:!0});let t="0";e.parentCategory&&(e.parentCategory=e.parentCategory+"",t=e.parentCategory.substring(e.parentCategory.lastIndexOf("-")+1)),e.parentCategory=t;let a=e;if(f(i)){a.id=c.value,(yield w(a))&&(x(),n("success"))}else{(yield C(a))&&(x(),n("success"))}}finally{P({confirmLoading:!1})}}))}}}});M.render=function(e,t,a,r,o,l){const n=y("BasicForm"),s=y("BasicModal");return b(),v(s,x(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:h((()=>[P(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var S=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:M});export{S as A,M as _,I as c,O as s};
